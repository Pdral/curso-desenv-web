<%- contentFor('title') %>
<title>Comunidade</title>

<%- contentFor('body') %>

<div class="container">
        
    <div class="search-bar">            
        <input id="titulo" type="text" placeholder="Buscar tópico de fórum...">
        <button id="pesquisar" onclick="filtraPostsTitulo()">Pesquisar</button>
        <button id="filterButton">Filtros</button>
        <div class="dropdown-content" id="dropdownContent">
            <a href="#" onclick="filtraPosts('')">Todos os jogos</a>
            <% for (var i=0; i<jogos.length; i++) {%>
                <a href="#" onclick="filtraPosts('<%= jogos[i]["nome"] %>')"><%= jogos[i]["nome"] %></a>
            <% } %>
        </div>
    </div>
    
    <div class="postar">  
        <button id="postar" onclick="window.location.href='/criar-post %>';">Criar Post</button>
    </div>

    <% for (var i=0; i<posts.length; i++) {%>
        <a class="post-link" href="/post/<%= posts[i]["id"]%> %>">
            <div class="post">
                <div class="post-header">
                    <img src=<%= posts[i]["user"]["icon"] %> alt="Imagem do Usuário">
                    <span class="nickname" data-receiver-id="<%= posts[i].user.id %>">
                        <%= posts[i]["user"]["username"] %>
                    </span>
                </div>
                <h2><%= posts[i]["titulo"] %></h2>
                <span class="tags"><%= posts[i]["jogo"] %></span>
                <p><%= posts[i]["texto"] %></p>
                <div class="post-actions">
                    <button class="comment"><svg class="comment-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M21 6h-18v12h14l4 4z"/></svg></button>
                </div>
            </div>
        </a>
    <% } %>

</div>

<div class="icon-container">
    <div class="chat-icon" id="chatIconUsuario" style="display:none;">
        <img src="../img/chat.png" alt="Chat Usuario">
    </div>
</div>

<!-- Container para os chats -->
<div class="chat-container">
    <!-- Janela de Chat com Usuario -->
    <div class="chat-window" id="chatWindowUsuario">
        <div class="chat-header">
            <h4>Chat com <span id="chatUsername"></span></h4>
            <span id="closeChatUsuario">X</span>
        </div>
        <div class="chat-messages" id="chatMessagesUsuario">
            <!-- Mensagens do chat com usuário serão adicionadas aqui dinamicamente -->
        </div>
        <form id="enviarMessagem" class="chat-input">
            <input type="text" id="messageInput" placeholder="Digite sua mensagem..." required>
            <button type="submit">Enviar</button>
        </form>
    </div>
</div>